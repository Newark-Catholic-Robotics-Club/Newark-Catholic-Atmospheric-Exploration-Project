<!DOCTYPE html>
<html dir="ltr" class="js desktop" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>chronodot_v2.0 [macetech documentation]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="date" content="2015-05-21T20:51:20-0400">
<meta name="keywords" content="chronodot_v2.0">
<link rel="search" type="application/opensearchdescription+xml" href="http://docs.macetech.com/lib/exe/opensearch.php" title="macetech documentation">
<link rel="start" href="http://docs.macetech.com/">
<link rel="contents" href="http://docs.macetech.com/doku.php/chronodot_v2.0?do=index" title="Sitemap">
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="http://docs.macetech.com/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://docs.macetech.com/feed.php?mode=list&amp;ns=">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://docs.macetech.com/doku.php/chronodot_v2.0?do=export_xhtml">
<link rel="canonical" href="http://docs.macetech.com/doku.php/chronodot_v2.0">
<link rel="stylesheet" type="text/css" href="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/css.css">
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"chronodot_v2.0","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/js.php"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="http://docs.macetech.com/lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="http://docs.macetech.com/lib/tpl/dokuwiki/images/apple-touch-icon.png">
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="http://docs.macetech.com/doku.php/start" accesskey="h" title="[H]"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/logo.png" alt="" height="64" width="64"> <span>macetech documentation</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://docs.macetech.com/doku.php/chronodot_v2.0?do=login&amp;sectok=e83247f01440bd6fd028c7b9941c5d5c" class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/doku.php/start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input name="do" value="search" type="hidden"><input id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" type="text"><input value="Search" class="button" title="Search" type="submit"><div style="display: none;" id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/doku.php" method="get" accept-charset="utf-8"><div class="no"><input name="id" value="chronodot_v2.0" type="hidden"><select name="do" class="edit quickselect" title="Tools"><option selected="selected" value="">Tools</option><optgroup label="Page Tools"><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option></optgroup></select><input style="display: none;" value="&gt;" type="submit"></div></form>            </div>
            <ul>
                <li><a href="http://docs.macetech.com/doku.php/chronodot_v2.0?do=media&amp;ns=" class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="http://docs.macetech.com/doku.php/chronodot_v2.0?do=index" class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <span class="curid"><bdi><a href="http://docs.macetech.com/doku.php/chronodot_v2.0" class="breadcrumbs" title="chronodot_v2.0">chronodot_v2.0</a></bdi></span></div>
                    </div>
    
    
    <hr class="a11y">
</div></div><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <div id="dokuwiki__aside"><div class="pad aside include group">
                    <h3 style="cursor: pointer; display: none;" class="toggle open"><strong><span>−</span></strong>Sidebar</h3>
                    <div style="" class="content">
                                                                        
<p style="" aria-expanded="true">
<strong>Visit our store!</strong><br>

<a href="http://macetech.com/store" class="media" target="_blank" title="http://macetech.com/store" rel="nofollow"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/fetch.jpg" class="media" title="www.macetech.com_blog_images_macetech_storelink.jpg" alt="www.macetech.com_blog_images_macetech_storelink.jpg"></a>
</p>

<p style="" aria-expanded="true">
<strong><a href="http://docs.macetech.com/doku.php/start" class="wikilink1" title="start">Main Page</a></strong>
</p>

<h1 style="" aria-expanded="true" class="sectionedit1" id="product_documentation">Product Documentation</h1>
<div style="" aria-expanded="true" class="level1">
<ul>
<li class="level1"><div class="li"> <strong>LED Products</strong></div>
<ul>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/shiftbrite_2.0" class="wikilink1" title="shiftbrite_2.0">ShiftBrite 2.0</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/megabrite" class="wikilink1" title="megabrite">MegaBrite</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/shiftbar" class="wikilink1" title="shiftbar">ShiftBar</a></div>
</li>
<li class="level2"><div class="li"> <span class="curid"><a href="http://docs.macetech.com/doku.php/octobrite" class="wikilink1" title="octobrite">OctoBrite</a></span></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/satellite_module_001" class="wikilink1" title="satellite_module_001">Satellite Module 001</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/satellite_module_s-001" class="wikilink1" title="satellite_module_s-001">Satellite Module S-001</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/octobar" class="wikilink1" title="octobar">OctoBar</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/led_matrix_shades" class="wikilink1" title="led_matrix_shades">LED Matrix Shades</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/rgb_shades" class="wikilink1" title="rgb_shades">RGB Shades</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/early_access_rgb_shades" class="wikilink1" title="early_access_rgb_shades">Early Access RGB Shades</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>Arduino Products</strong></div>
<ul>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/shiftbrite_shield" class="wikilink1" title="shiftbrite_shield">ShiftBrite Shield</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/shifty_vu_shield" class="wikilink1" title="shifty_vu_shield">Shifty VU Shield</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/centipede_shield" class="wikilink1" title="centipede_shield">Centipede Shield</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>Timekeeping Products</strong></div>
<ul>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/chronodot" class="wikilink1" title="chronodot">ChronoDot</a></div>
</li>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/chronodot_v2.0" class="wikilink1" title="chronodot_v2.0">ChronoDot V2.0</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>Power Products</strong></div>
<ul>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/6vdc_power_supply" class="wikilink2" title="6vdc_power_supply" rel="nofollow">6VDC Power Supply</a></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>Wire Products</strong></div>
<ul>
<li class="level2"><div class="li"> <a href="http://docs.macetech.com/doku.php/6-pin_cables" class="wikilink2" title="6-pin_cables" rel="nofollow">6-Pin Cables</a></div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT1 SECTION "Product Documentation" [150-733] -->
<h1 style="" aria-expanded="true" class="sectionedit2" id="application_examples">Application Examples</h1>
<div style="" aria-expanded="true" class="level1">
<ul>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/shiftbrite#code_example" class="wikilink1" title="shiftbrite">Simple Test</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/raspberry_pi_with_octobrite_shiftbrite" class="wikilink1" title="raspberry_pi_with_octobrite_shiftbrite">ShiftBrite with Raspberry Pi</a> </div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/rusty_vu" class="wikilink1" title="rusty_vu">Rusty VU</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/attiny_avr-gcc" class="wikilink1" title="attiny_avr-gcc">ATTiny &amp; AVR-GCC</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/avr_assembler" class="wikilink1" title="avr_assembler">AVR Assembler</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/hardware_spi_example" class="wikilink1" title="hardware_spi_example">Hardware SPI Example</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/non-hardware_spi_example" class="wikilink1" title="non-hardware_spi_example">Non-hardware SPI Example</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/octobrite_on_attiny84_with_hw_spi" class="wikilink1" title="octobrite_on_attiny84_with_hw_spi">OctoBrite on ATTiny84 with HW SPI</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/led_matrix_shades_changing_messages" class="wikilink1" title="led_matrix_shades_changing_messages">LED Shades: Changing Messages</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://docs.macetech.com/doku.php/led_matrix_shades_bitmap_patterns" class="wikilink1" title="led_matrix_shades_bitmap_patterns">LED Shades: Bitmap Patterns</a></div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Application Examples" [734-] -->                                            </div>
                </div></div><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>chronodot_v2.0</span></div>

                <div style="min-height: 801px;" class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 style="cursor: pointer;" class="toggle open"><strong><span>−</span></strong>Table of Contents</h3>
<div style="">

<ul style="" aria-expanded="true" class="toc">
<li class="level1"><div class="li"><a href="#chronodot">ChronoDot</a></div></li>
<li class="level1"><div class="li"><a href="#features">Features</a></div></li>
<li class="level1"><div class="li"><a href="#assembly">Assembly</a></div></li>
<li class="level1"><div class="li"><a href="#power_connections">Power Connections</a></div></li>
<li class="level1"><div class="li"><a href="#battery">Battery</a></div></li>
<li class="level1"><div class="li"><a href="#sda_scl">SDA/SCL</a></div></li>
<li class="level1"><div class="li"><a href="#rst">RST</a></div></li>
<li class="level1"><div class="li"><a href="#sqw">SQW</a></div></li>
<li class="level1"><div class="li"><a href="#k">32K</a></div></li>
<li class="level1"><div class="li"><a href="#datasheet">Datasheet</a></div></li>
<li class="level1"><div class="li"><a href="#rtclib">RTCLib</a></div></li>
<li class="level1"><div class="li"><a href="#examples">Examples</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="chronodot">ChronoDot</h1>
<div class="level1">

<p>
<img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/fetch_002.jpg" class="medialeft" title="macetech.com_store_images_chronodotv2.jpg" alt="macetech.com_store_images_chronodotv2.jpg"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/fetch_003.jpg" class="medialeft" title="macetech.com_store_images_chronodotv22.jpg" alt="macetech.com_store_images_chronodotv22.jpg">
The <a href="http://macetech.com/store/index.php?main_page=product_info&amp;cPath=5&amp;products_id=8" class="urlextern" target="_blank" title="http://macetech.com/store/index.php?main_page=product_info&amp;cPath=5&amp;products_id=8" rel="nofollow">ChronoDot RTC</a>
 is an extremely accurate real time clock module, based on the DS3231 
temperature compensated RTC (TCXO). It includes a CR1632 battery which 
should last at least 8 years if the I2C interface is only used while the
 device has 5V power available. No external crystal or tuning capacitors
 are required.
</p>

<p>
The DS3231 has an internal crystal and a switched bank of tuning 
capacitors. The temperature of the crystal is continuously monitored, 
and the capacitors are adjusted to maintain a stable frequency. Other 
RTC solutions may drift minutes per month, especially in extreme 
temperature ranges…the ChronoDot will drift less than a minute per year.
 This makes the ChronoDot very well suited for time critical 
applications that cannot be regularly synchronized to an external clock.
 Here is a live demo of a DS3231 chip that has been keeping time since 
it was last synchronized in 2005: <a href="http://www.maxim-ic.com/products/timers/DS3231_demo/" class="urlextern" target="_blank" title="http://www.maxim-ic.com/products/timers/DS3231_demo/" rel="nofollow">DS3231 Web Demo</a>
</p>

<p>
The ChronoDot will plug into a standard solderless breadboard and also has mounting holes for chassis installation.
</p>

<p>
The I2C interface is very straightforward and virtually identical to the
 register addresses of the popular DS1337 and DS1307 RTCs, which means 
that existing code for the Arduino, Basic Stamp, Cubloc, and other 
controllers should work with no modification.
</p>

</div>

<h1 class="sectionedit2" id="features">Features</h1>
<div class="level1">

<p>
<img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/chronodotv2.png" class="medialeft" alt="" width="150">
</p>
<div class="table sectionedit3"><table class="inline">
	<tbody><tr class="row0">
		<th class="col0 rightalign">  Controller: </th><td class="col1 leftalign"> Maxim DS3231SN  </td>
	</tr>
	<tr class="row1">
		<th class="col0 rightalign">  Function: </th><td class="col1 leftalign"> Temperature-compensated RTC  </td>
	</tr>
	<tr class="row2">
		<th class="col0 rightalign">  Accuracy: </th><td class="col1 leftalign"> ± 3.5ppm at -40C to +85C (~1 minute per year)  </td>
	</tr>
	<tr class="row3">
		<th class="col0 rightalign">  Power Supply: </th><td class="col1 leftalign"> 2.3 to 5.5 V DC  </td>
	</tr>
	<tr class="row4">
		<th class="col0 rightalign">  Current: </th><td class="col1 leftalign"> 200uA (active), 840nA (timekeeping)  </td>
	</tr>
	<tr class="row5">
		<th class="col0 rightalign">  PCB Size: </th><td class="col1 leftalign"> 1.2 inches diameter  </td>
	</tr>
	<tr class="row6">
		<th class="col0 rightalign">  Pin Spacing: </th><td class="col1 leftalign"> 0.1 inches  </td>
	</tr>
	<tr class="row7">
		<th class="col0 rightalign">  Header Spacing: </th><td class="col1 leftalign"> 0.9 inches  </td>
	</tr>
</tbody></table></div>

<p>
<em>For slightly different specifications and instructions for the original ChronoDot, please visit this page: <a href="http://docs.macetech.com/doku.php/chronodot" class="wikilink1" title="chronodot">ChronoDot</a></em>
</p>

</div>

<h1 class="sectionedit4" id="assembly">Assembly</h1>
<div class="level1">

<p>
The ChronoDot V2.0 has been updated with a top-mounted battery holder – 
no soldering required. Simply remove the CR1632 battery from its 
packaging, and slide into the battery holder. Please ensure the top 
(marked +) side of the battery is facing the top of the battery holder 
(also marked +).
</p>

</div>

<h1 class="sectionedit5" id="power_connections">Power Connections</h1>
<div class="level1">

<p>
The <strong>VCC</strong> and <strong>GND</strong> pins are used to power the ChronoDot when it is connected to a microcontroller. The ChronoDot <em>can</em> be used just with the internal battery power, but it could quickly run the battery down and require replacement. <strong>VCC</strong> can be anywhere between 2.3 and 5.5 volts, making it possible to use the ChronoDot with 3.3V and 5V systems.
</p>

</div>

<h1 class="sectionedit6" id="battery">Battery</h1>
<div class="level1">

<p>
The battery is a 3V lithium CR1632 coin cell, one is provided with every
 ChronoDot purchase. You should install the battery before use, to 
prevent loss of timekeeping during power off cycles. The battery voltage
 is also connected directly to the <strong>BAT</strong> pin. This could be used to attach an external battery instead of the CR1632, or to monitor the health of the battery. <strong>Make sure not to short this pin accidentally, or the battery could be drained quickly.</strong>
</p>

</div>

<h1 class="sectionedit7" id="sda_scl">SDA/SCL</h1>
<div class="level1">

<p>
The <strong>SDA</strong> and <strong>SCL</strong> pins are used to communicate with the ChronoDot, using the I2C standard interface. The I2C bus requires pullup resistors from <strong>SDA</strong> and <strong>SCL</strong> to <strong>VCC</strong>.
 Since many devices that have I2C buses already have the resistors in 
place, these are not provided with the ChronoDot. But there are two 
locations for 4.7K or 10K resistors to be soldered, in case your 
controlling device does not have its own pullup resistors.
</p>

</div>

<h1 class="sectionedit8" id="rst">RST</h1>
<div class="level1">

<p>
The <strong>RST</strong> pin is an active-low signal that can be used in
 some microcontroller applications. In most cases you will not need to 
use it. If the <strong>VCC</strong> supply is less than ~2.5V, the <strong>RST</strong> line will activate. Additionally, the <strong>RST</strong> line will watch for the signal to be pulled low by an external signal. If that happens, it will hold the <strong>RST</strong>
 line low for 250ms beyond the point the external signal release the 
line. This can be useful for resetting a microcontroller in the event of
 low power, or an external condition like a reset pushbutton. The <strong>RST</strong> line does not affect timekeeping functions.
</p>

</div>

<h1 class="sectionedit9" id="sqw">SQW</h1>
<div class="level1">

<p>
The <strong>SQW</strong> pin can be configured to output a square wave 
signal at 1.000 Hz, 1024 Hz, 4096 Hz, or 8192 Hz. This is controlled by 
the RS2 and RS1 bits in the control register (address 0x0E). The pin can
 also be used as an alarm trigger. If the INTCN bit in the control 
register is set, then the output will go low when the current time 
matches the time set in either of the two alarm registers. This pin 
needs to be pulled up to <strong>VCC</strong> with a resistor if it is used, 10K would be a good choice.
</p>

</div>

<h1 class="sectionedit10" id="k">32K</h1>
<div class="level1">

<p>
The <strong>32K</strong> pin is open-drain (needs a pullup resistor) and
 outputs a 32768 Hz clock signal. This can be enabled using the EN32kHz 
bit in the Status register (address 0x0F). This pin could be used as an 
accurate oscillator reference for some external device.
</p>

</div>

<h1 class="sectionedit11" id="datasheet">Datasheet</h1>
<div class="level1">

<p>
The <a href="http://datasheets.maxim-ic.com/en/ds/DS3231.pdf" class="urlextern" target="_blank" title="http://datasheets.maxim-ic.com/en/ds/DS3231.pdf" rel="nofollow">DS3231 datasheet</a> provides all other necessary information such as registers, maximum voltages, power consumption, and special features.
</p>

</div>

<h1 class="sectionedit12" id="rtclib">RTCLib</h1>
<div class="level1">

<p>
Here is a ChronoDot library written by mizraith, on Github: <a href="https://github.com/mizraith/RTClib" class="urlextern" target="_blank" title="https://github.com/mizraith/RTClib" rel="nofollow">https://github.com/mizraith/RTClib</a>
</p>

</div>

<h1 class="sectionedit13" id="examples">Examples</h1>
<div class="level1">

<p>
Very simple Arduino code to read and print the hours, minutes, and seconds from the ChronoDot:
</p>
<pre class="code =c"><span class="co2">#include &lt;Wire.h&gt;</span>
&nbsp;
<span class="kw4">void</span> setup<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  Wire.<span class="me1">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  Serial.<span class="me1">begin</span><span class="br0">(</span><span class="nu0">9600</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
  <span class="co1">// clear /EOSC bit</span>
  <span class="co1">// Sometimes necessary to ensure that the clock</span>
  <span class="co1">// keeps running on just battery power. Once set,</span>
  <span class="co1">// it shouldn't need to be reset but it's a good</span>
  <span class="co1">// idea to make sure.</span>
  Wire.<span class="me1">beginTransmission</span><span class="br0">(</span><span class="nu12">0x68</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// address DS3231</span>
  Wire.<span class="me1">write</span><span class="br0">(</span><span class="nu12">0x0E</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// select register</span>
  Wire.<span class="me1">write</span><span class="br0">(</span><span class="nu6">0b00011100</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// write register bitmap, bit 7 is /EOSC</span>
  Wire.<span class="me1">endTransmission</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span>
&nbsp;
<span class="kw4">void</span> loop<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  <span class="co1">// send request to receive data starting at register 0</span>
  Wire.<span class="me1">beginTransmission</span><span class="br0">(</span><span class="nu12">0x68</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// 0x68 is DS3231 device address</span>
  Wire.<span class="me1">write</span><span class="br0">(</span><span class="br0">(</span>byte<span class="br0">)</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// start at register 0</span>
  Wire.<span class="me1">endTransmission</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  Wire.<span class="me1">requestFrom</span><span class="br0">(</span><span class="nu12">0x68</span><span class="sy0">,</span> <span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// request three bytes (seconds, minutes, hours)</span>
&nbsp;
  <span class="kw1">while</span><span class="br0">(</span>Wire.<span class="me1">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
  <span class="br0">{</span> 
    <span class="kw4">int</span> seconds <span class="sy0">=</span> Wire.<span class="me1">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// get seconds</span>
    <span class="kw4">int</span> minutes <span class="sy0">=</span> Wire.<span class="me1">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// get minutes</span>
    <span class="kw4">int</span> hours <span class="sy0">=</span> Wire.<span class="me1">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>   <span class="co1">// get hours</span>
&nbsp;
    seconds <span class="sy0">=</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>seconds <span class="sy0">&amp;</span> <span class="nu6">0b11110000</span><span class="br0">)</span><span class="sy0">&gt;&gt;</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">10</span> <span class="sy0">+</span> <span class="br0">(</span>seconds <span class="sy0">&amp;</span> <span class="nu6">0b00001111</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// convert BCD to decimal</span>
    minutes <span class="sy0">=</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>minutes <span class="sy0">&amp;</span> <span class="nu6">0b11110000</span><span class="br0">)</span><span class="sy0">&gt;&gt;</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">10</span> <span class="sy0">+</span> <span class="br0">(</span>minutes <span class="sy0">&amp;</span> <span class="nu6">0b00001111</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// convert BCD to decimal</span>
    hours <span class="sy0">=</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>hours <span class="sy0">&amp;</span> <span class="nu6">0b00100000</span><span class="br0">)</span><span class="sy0">&gt;&gt;</span><span class="nu0">5</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">20</span> <span class="sy0">+</span> <span class="br0">(</span><span class="br0">(</span>hours <span class="sy0">&amp;</span> <span class="nu6">0b00010000</span><span class="br0">)</span><span class="sy0">&gt;&gt;</span><span class="nu0">4</span><span class="br0">)</span><span class="sy0">*</span><span class="nu0">10</span> <span class="sy0">+</span> <span class="br0">(</span>hours <span class="sy0">&amp;</span> <span class="nu6">0b00001111</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span> <span class="co1">// convert BCD to decimal (assume 24 hour mode)</span>
&nbsp;
    Serial.<span class="me1">print</span><span class="br0">(</span>hours<span class="br0">)</span><span class="sy0">;</span> Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">":"</span><span class="br0">)</span><span class="sy0">;</span> Serial.<span class="me1">print</span><span class="br0">(</span>minutes<span class="br0">)</span><span class="sy0">;</span> Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">":"</span><span class="br0">)</span><span class="sy0">;</span> Serial.<span class="me1">println</span><span class="br0">(</span>seconds<span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
&nbsp;
  delay<span class="br0">(</span><span class="nu0">1000</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span></pre>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>/home/macetec/public_html/docs/data/pages/chronodot_v2.0.txt</bdi> · Last modified: 2015/05/21 20:51 by <bdi>macegr</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y">

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://docs.macetech.com/doku.php/chronodot_v2.0?do=backlink" class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" target="_blank"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/button-donate.gif" alt="Donate" height="15" width="80"></a>
        <a href="http://www.php.net/" title="Powered by PHP" target="_blank"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/button-php.gif" alt="Powered by PHP" height="15" width="80"></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" target="_blank"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/button-html5.png" alt="Valid HTML5" height="15" width="80"></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" target="_blank"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/button-css.png" alt="Valid CSS" height="15" width="80"></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" target="_blank"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/button-dw.png" alt="Driven by DokuWiki" height="15" width="80"></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="chronodot_v2.0%20%5Bmacetech%20documentation%5D_files/indexer.gif" alt="" height="1" width="2"></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->


</body></html>